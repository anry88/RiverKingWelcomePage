<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>River King — open Telegram bot</title>
  <meta name="description" content="Official River King landing. Click the button to open the Telegram bot." />
  <link rel="canonical" href="https://anry88.github.io/RiverKingWelcomePage/" />

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="River King — open Telegram bot">
  <meta property="og:description" content="Open the River King bot in one click.">
  <meta property="og:image" content="https://raw.githubusercontent.com/<user>/<repo>/main/og-cover.png">
  <meta property="og:url" content="https://anry88.github.io/RiverKingWelcomePage/" />

  <!-- GA4 (optional) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-XXXXXXXXXX', { transport_type: 'beacon' });
  </script>

  <style>
    :root { --bg1:#0b1221; --bg2:#12243d; --card:#0f1b31; --txt:#e7eefc; --sub:#a9b8d9; }
    * { box-sizing:border-box; }
    html,body { height:100%; margin:0; font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu; color:var(--txt); background:linear-gradient(180deg,var(--bg1),var(--bg2)); }
    .wrap { min-height:100%; display:grid; place-items:center; padding:24px; }
    .card {
      width:min(720px,96%); background:rgba(15,27,49,.92);
      border:1px solid rgba(255,255,255,.08); border-radius:20px; padding:28px 24px;
      box-shadow:0 10px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.04);
      position:relative;
    }
    h1 { margin:0 0 8px; font-size:clamp(24px,3.5vw,38px); letter-spacing:.2px; }
    p { margin:0 0 20px; color:var(--sub); font-size:clamp(14px,2.2vw,18px); line-height:1.55; }
    .cta {
      display:inline-flex; align-items:center; justify-content:center; gap:10px;
      width:100%; max-width:420px; padding:16px 20px; border-radius:14px;
      background:#2e74ff; color:white; text-decoration:none; font-weight:700; font-size:18px;
      border:1px solid rgba(255,255,255,.15); box-shadow:0 6px 16px rgba(46,116,255,.35);
      transition:transform .06s ease, box-shadow .2s ease, opacity .2s ease;
    }
    .cta:hover { transform:translateY(-1px); box-shadow:0 10px 22px rgba(46,116,255,.42); }
    .cta:active { transform:translateY(0); }
    .meta { margin-top:14px; font-size:13px; color:#93a7d0; opacity:.9 }
    .logo {
      width:56px; height:56px; border-radius:14px; display:grid; place-items:center;
      background:radial-gradient(60% 60% at 60% 30%, #4aa3ff 0%, #2e74ff 50%, #2246b8 100%);
      box-shadow:inset 0 1px 0 rgba(255,255,255,.25), 0 6px 20px rgba(0,0,0,.35);
      margin-right:14px; flex:0 0 auto;
    }
    .row { display:flex; align-items:center; gap:12px; margin-bottom:10px; }
    .small { font-size:12px; opacity:.8 }
    .kbd { padding:2px 6px; border:1px solid rgba(255,255,255,.2); border-radius:6px; font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }

    /* Lang switcher */
    .lang {
      position:absolute; top:16px; right:16px; display:flex; gap:8px;
      background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12);
      padding:6px; border-radius:12px; backdrop-filter: blur(4px);
    }
    .lang button {
      cursor:pointer; border:0; padding:6px 10px; border-radius:8px;
      color:var(--txt); background:transparent; font-weight:700; font-size:12px;
    }
    .lang button.active { background:#2e74ff; }
  </style>

  <script>
    // --- Early parse to survive GH trailing slash normalizations ---
    (function persistLangFromUrlEarly() {
      try {
        var search = new URLSearchParams(location.search);
        var hash = location.hash.replace(/^#/, '');
        var hparams = new URLSearchParams(hash.includes('=') ? hash : ('lang=' + hash));
        var qLang = (search.get('lang') || '').toLowerCase();
        var hLang = (hparams.get('lang') || '').toLowerCase();
        var picked = (qLang === 'ru' || qLang === 'en') ? qLang
                   : (hLang === 'ru' || hLang === 'en') ? hLang : '';
        if (picked) localStorage.setItem('rk_lang', picked);
      } catch(_) {}
    })();
  </script>
</head>
<body>
  <main class="wrap">
    <section class="card">
      <div class="lang" aria-label="Language">
        <button id="btn-en" type="button">EN</button>
        <button id="btn-ru" type="button">RU</button>
      </div>

      <div class="row">
        <div class="logo" aria-hidden="true">🎣</div>
        <div>
          <h1 id="t-heading">River King — open the Telegram bot</h1>
          <div id="t-sub" class="small">Official launch button.</div>
        </div>
      </div>

      <p id="t-paragraph">Press the button below — Telegram will open.</p>

      <a id="cta" class="cta" href="https://t.me/river_king_bot?start=start" rel="noopener">
        Open the bot in Telegram
      </a>

      <div class="meta">
        <span id="t-manual">If auto-open didn’t work, open the link manually:</span>
        <span class="kbd" id="t-link">https://t.me/river_king_bot?start=start</span>
      </div>
    </section>
  </main>

  <script>
    'use strict';
    const I18N = {
      en: {
        langAttr: 'en',
        title: 'River King — open Telegram bot',
        heading: 'River King — open the Telegram bot',
        sub: 'Official launch button.',
        paragraph: 'Press the button below — Telegram will open.',
        button: 'Open the bot in Telegram',
        manual: 'If auto-open didn’t work, open the link manually:'
      },
      ru: {
        langAttr: 'ru',
        title: 'River King — открыть Telegram-бота',
        heading: 'River King — открыть Telegram-бота',
        sub: 'Официальная кнопка запуска.',
        paragraph: 'Нажмите кнопку ниже — Telegram откроется.',
        button: 'Открыть бота в Telegram',
        manual: 'Если автоматический переход не сработал, откройте ссылку вручную:'
      }
    };
    const $ = id => document.getElementById(id);

    function baseUrlWithSlash() {
      // гарантируем конечный слеш, чтобы GitHub Pages не редиректил и не терял query/hash
      const u = new URL(location.href);
      if (!u.pathname.endsWith('/')) u.pathname += '/';
      u.search = ''; // очищаем query перед расстановкой
      return u;
    }

    function setLang(lang) {
      const t = I18N[lang] || I18N.en;
      document.documentElement.lang = t.langAttr;
      document.title = t.title;
      $('t-heading').textContent = t.heading;
      $('t-sub').textContent = t.sub;
      $('t-paragraph').textContent = t.paragraph;
      $('cta').textContent = t.button;
      $('t-manual').textContent = t.manual;
      $('btn-en').classList.toggle('active', lang === 'en');
      $('btn-ru').classList.toggle('active', lang === 'ru');
      try { localStorage.setItem('rk_lang', lang); } catch(_) {}
    }

    function detectLang() {
      // 1) URL ?lang=
      const q = new URLSearchParams(location.search);
      const qLang = (q.get('lang') || '').toLowerCase();

      // 2) hash #lang=ru или просто #ru
      const rawHash = location.hash.replace(/^#/, '');
      const hp = new URLSearchParams(rawHash.includes('=') ? rawHash : ('lang=' + rawHash));
      const hLang = (hp.get('lang') || '').toLowerCase();

      if (qLang === 'ru' || qLang === 'en') return qLang;
      if (hLang === 'ru' || hLang === 'en') return hLang;

      // 3) localStorage
      try {
        const stored = (localStorage.getItem('rk_lang') || '').toLowerCase();
        if (stored === 'ru' || stored === 'en') return stored;
      } catch(_) {}

      // 4) браузер
      const langs = (navigator.languages || []).map(x => String(x).toLowerCase());
      const primary = String(navigator.language || '').toLowerCase();
      const all = [...langs, primary];
      if (all.some(l => l.startsWith('ru'))) return 'ru';

      // 5) дефолт
      return 'en';
    }

    function writeCleanUrl(lang) {
      // Пишем и query, и hash, чтобы любой редирект их сохранил
      const u = baseUrlWithSlash();
      u.searchParams.set('lang', lang);
      u.hash = 'lang=' + lang;
      history.replaceState(null, '', u);
    }

    // init
    document.addEventListener('DOMContentLoaded', () => {
      const lang = detectLang();
      setLang(lang);
      writeCleanUrl(lang); // зафиксируем корректный URL вида /repo/?lang=xx#lang=xx

      $('btn-en').addEventListener('click', () => {
        setLang('en');
        writeCleanUrl('en');
      });
      $('btn-ru').addEventListener('click', () => {
        setLang('ru');
        writeCleanUrl('ru');
      });

      // Реагируем на изменения хэша (если вручную поменяли #ru/#lang=ru)
      window.addEventListener('hashchange', () => {
        const h = location.hash.replace(/^#/, '');
        const hp = new URLSearchParams(h.includes('=') ? h : ('lang=' + h));
        const hl = (hp.get('lang') || '').toLowerCase();
        if (hl === 'ru' || hl === 'en') {
          setLang(hl);
          writeCleanUrl(hl);
        }
      });
    });
  </script>
</body>
</html>
